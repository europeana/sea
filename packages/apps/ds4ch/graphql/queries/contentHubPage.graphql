#import "@europeana/sea-base-layer/graphql/fragments/imageFields.graphql"
#import "../fragments/primaryCallToActionFields.graphql"

query ContentHubPage(
  $identifier: String!
  $locale: String!
  $site: String = "dataspace-culturalheritage.eu"
  $preview: Boolean = false
) {
  contentHubPageCollection(
    preview: $preview
    locale: $locale
    where: { identifier: $identifier, site: $site }
    limit: 1
  ) {
    items {
      name
      headline
      description
      image {
        ...imageFields
      }
      contentTypes
      primaryImageOfPage {
        name
        nameEN: name(locale: "en-GB")
        creator
        provider
        license
        url
        image {
          ...imageFields
        }
      }
      featuredContent {
        __typename
        ... on BlogPosting {
          sys {
            id
          }
          name
          datePublished
          primaryImageOfPage {
            image {
              ...imageFields
            }
          }
          identifier
          categoriesCollection {
            items {
              identifier
            }
          }
        }
        ... on ProjectPage {
          sys {
            id
          }
          name
          headline
          primaryImageOfPage {
            image {
              ...imageFields
            }
          }
          identifier
          categoriesCollection {
            items {
              identifier
            }
          }
        }
      }
      hasPartCollection(limit: 20) {
        items {
          __typename
          ... on PrimaryCallToAction {
            ...primaryCallToActionFields
          }
        }
      }
    }
  }
}
